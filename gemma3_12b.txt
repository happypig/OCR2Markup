Setting up Ollama and Gemma model...
Ollama is already installed
Available models:
NAME          ID              SIZE      MODIFIED       
gemma3:12b    f4031aab637d    8.1 GB    19 minutes ago    

Flask server started on http://localhost:5000
 * Serving Flask app '__main__'
 * Debug mode: on
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://192.168.48.93:5000
INFO:werkzeug:[33mPress CTRL+C to quit[0m
DEBUG:urllib3.connectionpool:Starting new HTTP connection (1): localhost:11434
Received data: {'model': 'gemma3:12b', 'messages': [{'role': 'system', 'content': "${contextInfo} You're a XML markup editor. You should markup the selected string which is bibliography from Buddist Tripitaka  with TEI P5 tags by the following: 1) enclosed the string with <ref> for bibliorgraphy reference; 2) follow the examples to markup the rest semantical elements of <canon> for canon, <v>for volume, <w>for work(after 'No.' normally), <p> for page(after 'p' or 'é '), <c> for column(in a, b, c or ä¸Šæ®µ, ä¸­æ®µ, ä¸‹æ®µ) and <l> for line. 3) You are only allowed to add the above xml tags without adding extra characters or punctuations, also leave the rest untagged characters between tags. 5) if the first char is 't' replace it with 'T' or if the first three char is 'cht' or 'chT' replace it with 'ChT'."}, {'role': 'user', 'content': 'p.69c7'}, {'role': 'assistant', 'content': '<ref>p.<p>69</p><c>c</c><l>7</l></ref>'}, {'role': 'user', 'content': 'ã€å¤§æ­£è—ã€ç¬¬å››å·359a1-b7'}, {'role': 'assistant', 'content': '<ref>ã€<canon>å¤§æ­£è—</canon>ã€ç¬¬<v>å››</v>å·<p>359</p><c>a </c><l>1</l>-<c>b </c><l>7</l></ref>'}, {'role': 'user', 'content': 'å¤§æ­£:no.310, 373, ä¸Šæ®µ 4-5'}, {'role': 'assistant', 'content': '<ref><canon>å¤§æ­£</canon><v>18</v> No.<w>865</w> p.<p>216</p>.<c>b</c>.<l>4</l>-<l>12</l></ref>'}, {'role': 'user', 'content': 'å¤§æ­£18 no.865 p.216.b.4-12'}, {'role': 'assistant', 'content': '<ref><canon>å¤§æ­£</canon><v>18</v> No.<w>865</w> p.<p>216</p>.<c>b</c>.<l>4</l>-<l>12</l></ref>'}, {'role': 'user', 'content': 'cht.2,p.69c5-9'}, {'role': 'assistant', 'content': '<ref><canon>ChT</canon>.<v>2</v>,<p>69</p><c>c</c><l>5</l>-<l>9</l></ref>'}, {'role': 'user', 'content': 't.22,757a15-17;924c10-12'}, {'role': 'assistant', 'content': '<ref><canon>T</canon>.<v>22</v>,<p>757</p><c>a</c><l>15</l>-<l>17</l>;<p>924</p><c>c</c><l>10</l>-<l>12</l></ref>'}, {'role': 'user', 'content': 't.23,295c1-296a19'}, {'role': 'assistant', 'content': '<ref><canon>T</canon>.<v>23</v>,<p>295</p><c>c</c><l>1</l>-<p>296</p><<c>a</c><l>19</l></ref>'}, {'role': 'user', 'content': 't.22,926b29-c12'}, {'role': 'assistant', 'content': '<ref><canon>T</canon>.<v>22</v>,<p>926</p><c>b</c><l>29</l>-<c>c</c><l>12</l></ref>'}, {'role': 'user', 'content': 't.22,761a21-29'}, {'role': 'assistant', 'content': '<ref><canon>T</canon>.<v>22</v>,<p>761</p><c>a</c><l>21</l>-<l>29</l></ref>'}, {'role': 'user', 'content': 'p.67c4'}], 'temperature': 0.0, 'stream': True}
Generating with gemma3:12b (timeout: 180s)...
DEBUG:urllib3.connectionpool:http://localhost:11434 "POST /api/generate HTTP/1.1" 200 None
INFO:werkzeug:127.0.0.1 - - [02/Jun/2025 18:55:06] "POST /ai/chat/completions HTTP/1.1" 200 -
<ref>p.<p>67</p><c>c</c><l>4</l></ref>
DEBUG:urllib3.connectionpool:Starting new HTTP connection (1): localhost:11434
Received data: {'model': 'gemma3:12b', 'messages': [{'role': 'system', 'content': "${contextInfo} You're a XML markup editor. You should markup the selected string which is bibliography from Buddist Tripitaka  with TEI P5 tags by the following: 1) enclosed the string with <ref> for bibliorgraphy reference; 2) follow the examples to markup the rest semantical elements of <canon> for canon, <v>for volume, <w>for work(after 'No.' normally), <p> for page(after 'p' or 'é '), <c> for column(in a, b, c or ä¸Šæ®µ, ä¸­æ®µ, ä¸‹æ®µ) and <l> for line. 3) You are only allowed to add the above xml tags without adding extra characters or punctuations, also leave the rest untagged characters between tags. 5) if the first char is 't' replace it with 'T' or if the first three char is 'cht' or 'chT' replace it with 'ChT'."}, {'role': 'user', 'content': 'p.69c7'}, {'role': 'assistant', 'content': '<ref>p.<p>69</p><c>c</c><l>7</l></ref>'}, {'role': 'user', 'content': 'ã€å¤§æ­£è—ã€ç¬¬å››å·359a1-b7'}, {'role': 'assistant', 'content': '<ref>ã€<canon>å¤§æ­£è—</canon>ã€ç¬¬<v>å››</v>å·<p>359</p><c>a </c><l>1</l>-<c>b </c><l>7</l></ref>'}, {'role': 'user', 'content': 'å¤§æ­£:no.310, 373, ä¸Šæ®µ 4-5'}, {'role': 'assistant', 'content': '<ref><canon>å¤§æ­£</canon><v>18</v> No.<w>865</w> p.<p>216</p>.<c>b</c>.<l>4</l>-<l>12</l></ref>'}, {'role': 'user', 'content': 'å¤§æ­£18 no.865 p.216.b.4-12'}, {'role': 'assistant', 'content': '<ref><canon>å¤§æ­£</canon><v>18</v> No.<w>865</w> p.<p>216</p>.<c>b</c>.<l>4</l>-<l>12</l></ref>'}, {'role': 'user', 'content': 'cht.2,p.69c5-9'}, {'role': 'assistant', 'content': '<ref><canon>ChT</canon>.<v>2</v>,<p>69</p><c>c</c><l>5</l>-<l>9</l></ref>'}, {'role': 'user', 'content': 't.22,757a15-17;924c10-12'}, {'role': 'assistant', 'content': '<ref><canon>T</canon>.<v>22</v>,<p>757</p><c>a</c><l>15</l>-<l>17</l>;<p>924</p><c>c</c><l>10</l>-<l>12</l></ref>'}, {'role': 'user', 'content': 't.23,295c1-296a19'}, {'role': 'assistant', 'content': '<ref><canon>T</canon>.<v>23</v>,<p>295</p><c>c</c><l>1</l>-<p>296</p><<c>a</c><l>19</l></ref>'}, {'role': 'user', 'content': 't.22,926b29-c12'}, {'role': 'assistant', 'content': '<ref><canon>T</canon>.<v>22</v>,<p>926</p><c>b</c><l>29</l>-<c>c</c><l>12</l></ref>'}, {'role': 'user', 'content': 't.22,761a21-29'}, {'role': 'assistant', 'content': '<ref><canon>T</canon>.<v>22</v>,<p>761</p><c>a</c><l>21</l>-<l>29</l></ref>'}, {'role': 'user', 'content': 't.No.366,p.348b9'}], 'temperature': 0.0, 'stream': True}
Generating with gemma3:12b (timeout: 180s)...
DEBUG:urllib3.connectionpool:http://localhost:11434 "POST /api/generate HTTP/1.1" 200 None
INFO:werkzeug:127.0.0.1 - - [02/Jun/2025 18:57:23] "POST /ai/chat/completions HTTP/1.1" 200 -
<ref><canon>T</canon>.<v>22</v> No.<w>366</w>,<p>348</p><c>b</c><l>9</l></ref>
DEBUG:urllib3.connectionpool:Starting new HTTP connection (1): localhost:11434
Received data: {'model': 'gemma3:12b', 'messages': [{'role': 'system', 'content': "${contextInfo} You're a XML markup editor. You should edit the selected string which is bibliography from Buddist Tripitaka by the following: 1) if the first char is 't' replace it with 'T' or if the first three char is 'cht' or 'chT' replace it with 'ChT'; 2) enclosed the string with <ref> for bibliorgraphy reference; 3) follow the examples to markup the rest elements as <canon> for canon, <v>for volume, <w>for work, <p> for page, <c> for column and <l> for line."}, {'role': 'user', 'content': 'ã€å¤§æ­£è—ã€ç¬¬å››å·359a1-b7'}, {'role': 'assistant', 'content': '<ref>ã€<canon>å¤§æ­£è—</canon>ã€ç¬¬<v>å››</v>å·<p>359</p><c>a </c><l>1</l>-<c>b </c><l>7</l></ref>'}, {'role': 'user', 'content': 'å¤§æ­£:no.310, 373, ä¸Šæ®µ 4-5'}, {'role': 'assistant', 'content': '<ref><canon>å¤§æ­£</canon><v>18</v> No.<w>865</w> p.<p>216</p>.<c>b</c>.<l>4</l>-<l>12</l></ref>'}, {'role': 'user', 'content': 'å¤§æ­£18 no.865 p.216.b.4-12'}, {'role': 'assistant', 'content': '<ref><canon>å¤§æ­£</canon><v>18</v> No.<w>865</w> p.<p>216</p>.<c>b</c>.<l>4</l>-<l>12</l></ref>'}, {'role': 'user', 'content': 'cht.2,p.69c5-9'}, {'role': 'assistant', 'content': '<ref><canon>ChT</canon>.<v>2</v>,<p>69</p><c>c</c><l>5</l>-<l>9</l></ref>'}, {'role': 'user', 'content': 't.22,757a15-17;924c10-12'}, {'role': 'assistant', 'content': '<ref><canon>T</canon>.<v>22</v>,<p>757</p><c>a</c><l>15</l>-<l>17</l>;<p>924</p><c>c</c><l>10</l>-<l>12</l></ref>'}, {'role': 'user', 'content': 't.23,295c1-296a19'}, {'role': 'assistant', 'content': '<ref><canon>T</canon>.<v>23</v>,<p>295</p><c>c</c><l>1</l>-<p>296</p><<c>a</c><l>19</l></ref>'}, {'role': 'user', 'content': 't.22,926b29-c12'}, {'role': 'assistant', 'content': '<ref><canon>T</canon>.<v>22</v>,<p>926</p><c>b</c><l>29</l>-<c>c</c><l>12</l></ref>'}, {'role': 'user', 'content': 't.22,761a21-29'}, {'role': 'assistant', 'content': '<ref><canon>T</canon>.<v>22</v>,<p>761</p><c>a</c><l>21</l>-<l>29</l></ref>'}, {'role': 'user', 'content': 't.No.366,p.348b9'}], 'temperature': 0.0, 'stream': True}
Generating with gemma3:12b (timeout: 180s)...
DEBUG:urllib3.connectionpool:http://localhost:11434 "POST /api/generate HTTP/1.1" 200 None
INFO:werkzeug:127.0.0.1 - - [02/Jun/2025 19:55:36] "POST /ai/chat/completions HTTP/1.1" 200 -
<ref><canon>T</canon> No.<w>366</w>,<p>348</p><c>b</c><l>9</l></ref>
DEBUG:urllib3.connectionpool:Starting new HTTP connection (1): localhost:11434
Received data: {'model': 'gemma3:12b', 'messages': [{'role': 'system', 'content': "${contextInfo} You're a XML markup editor. You should edit the selected string which is bibliography from Buddist Tripitaka by the following: 1) if the first char is 't' replace it with 'T' or if the first three char is 'cht' or 'chT' replace it with 'ChT'; 2) enclosed the string with <ref> for bibliorgraphy reference; 3) follow the examples to markup the rest elements as <canon> for canon, <v>for volume, <w>for work, <p> for page, <c> for column and <l> for line."}, {'role': 'user', 'content': 'ã€å¤§æ­£è—ã€ç¬¬å››å·359a1-b7'}, {'role': 'assistant', 'content': '<ref>ã€<canon>å¤§æ­£è—</canon>ã€ç¬¬<v>å››</v>å·<p>359</p><c>a </c><l>1</l>-<c>b </c><l>7</l></ref>'}, {'role': 'user', 'content': 'å¤§æ­£:no.310, 373, ä¸Šæ®µ 4-5'}, {'role': 'assistant', 'content': '<ref><canon>å¤§æ­£</canon><v>18</v> No.<w>865</w> p.<p>216</p>.<c>b</c>.<l>4</l>-<l>12</l></ref>'}, {'role': 'user', 'content': 'å¤§æ­£18 no.865 p.216.b.4-12'}, {'role': 'assistant', 'content': '<ref><canon>å¤§æ­£</canon><v>18</v> No.<w>865</w> p.<p>216</p>.<c>b</c>.<l>4</l>-<l>12</l></ref>'}, {'role': 'user', 'content': 'cht.2,p.69c5-9'}, {'role': 'assistant', 'content': '<ref><canon>ChT</canon>.<v>2</v>,<p>69</p><c>c</c><l>5</l>-<l>9</l></ref>'}, {'role': 'user', 'content': 't.22,757a15-17;924c10-12'}, {'role': 'assistant', 'content': '<ref><canon>T</canon>.<v>22</v>,<p>757</p><c>a</c><l>15</l>-<l>17</l>;<p>924</p><c>c</c><l>10</l>-<l>12</l></ref>'}, {'role': 'user', 'content': 't.23,295c1-296a19'}, {'role': 'assistant', 'content': '<ref><canon>T</canon>.<v>23</v>,<p>295</p><c>c</c><l>1</l>-<p>296</p><<c>a</c><l>19</l></ref>'}, {'role': 'user', 'content': 't.22,926b29-c12'}, {'role': 'assistant', 'content': '<ref><canon>T</canon>.<v>22</v>,<p>926</p><c>b</c><l>29</l>-<c>c</c><l>12</l></ref>'}, {'role': 'user', 'content': 't.22,761a21-29'}, {'role': 'assistant', 'content': '<ref><canon>T</canon>.<v>22</v>,<p>761</p><c>a</c><l>21</l>-<l>29</l></ref>'}, {'role': 'user', 'content': 'p.67c4'}], 'temperature': 0.0, 'stream': True}
Generating with gemma3:12b (timeout: 180s)...
DEBUG:urllib3.connectionpool:http://localhost:11434 "POST /api/generate HTTP/1.1" 200 None
INFO:werkzeug:127.0.0.1 - - [02/Jun/2025 19:59:01] "POST /ai/chat/completions HTTP/1.1" 200 -
<ref><p>67</p><c>c</c><l>4</l></ref>